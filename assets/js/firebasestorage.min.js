const storageRef = firebase.storage().ref();

document.querySelector('.my-pond').addEventListener('change', handleFileUploadChange);
document.querySelector('.my-pond').addEventListener('change', handleFileUploadSubmit);

let selectedFile;
function handleFileUploadChange(e) {
    selectedFile = e.target.files[0];
}

function handleFileUploadSubmit(e) {
    const uploadTask = storageRef.child(`Quotes/${selectedFile.name}`).put(selectedFile); //create a child directory called images, and place the file inside this directory
    uploadTask.on('state_changed', (snapshot) => {
        // Observe state change events such as progress, pause, and resume
    }, (error) => {
        // Handle unsuccessful uploads
        alert("You must log in to upload files. Delete this file and try again after logging in with Google or Email.");
    }, () => {
        // Do something once upload is complete
        console.log('success');
            uploadTask.snapshot.ref.getDownloadURL().then(function (downloadURL) {
                    document.getElementById('hiddenlink').value = downloadURL.toString();
            });
    });
}

function googleLogin() {
    var provider = new firebase.auth.GoogleAuthProvider();

    firebase.auth().signInWithPopup(provider)

        .then(result => {
            const user = result.user;
            document.getElementById('Pin-FullName').value = user.displayName.toString();
            document.getElementById('Pin-email').value = user.email.toString();
            document.getElementById('googleButton').style.display = "none";
            console.log(user.displayName + ", " + user.email);
        })
        .catch(console.log)
}
$(".gButton").click(function () {
    $(".gButton").toggleClass("disabled normal");

});